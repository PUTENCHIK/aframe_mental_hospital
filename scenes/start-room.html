<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>–°—Ç–∞—Ä—Ç–æ–≤–∞—è –ö–æ–º–Ω–∞—Ç–∞</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <link rel="stylesheet" href="../styles/inventory.css">
    <link rel="stylesheet" href="../styles/notification.css">
</head>
<body>
    <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
    <div class="ui-overlay">
        <div class="inventory-title">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
        <div class="inventory-items" id="inventory-ui">
            <!-- –°–ª–æ—Ç—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
    </div>
    
    <div class="notification" id="notification">
        –ü—Ä–µ–¥–º–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å!
    </div>
    <!-- /–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
    <a-scene fog="type: linear; color: #000000; near: 1; far: 6">
        <a-sky color="#000000"></a-sky>
        <a-entity light="type: ambient; color: #111111; intensity: 0.1"></a-entity>
    
        
        <a-box 
            position="1 2 -5" 
            width="4" 
            height="4" 
            depth="0.1" 
            src="../textures/wall.jpg"
            class="collision"
            >
        </a-box>

        <a-box 
            position="-3 2 -5" 
            width="4" 
            height="4" 
            depth="0.1" 
            src="../textures/wall.jpg"
            class="collision"
            >
        </a-box>

        <a-box 
            position="-4.89647 2 -3" 
            width="4" 
            height="4" 
            depth="0.1" 
            src="../textures/wall.jpg" 
            material="" 
            geometry="" 
            rotation="0 90 0"
            class="collision"
            >
        </a-box>


        <a-box 
            position="-4.89647 2 1" 
            width="4" 
            height="4" 
            depth="0.1" 
            src="../textures/wall.jpg" 
            material="" 
            geometry="" 
            rotation="0 90 0"
            class="collision">
        </a-box>
        
        <a-box 
            position="3 2 -3" 
            width="4" 
            height="4" 
            depth="0.1" 
            src="../textures/wall.jpg" 
            material="" 
            geometry="" 
            rotation="0 90 0"
            class="collision">
        </a-box>


        <a-box 
            position="3 2 1" 
            width="4" 
            height="4" 
            depth="0.1" 
            src="../textures/wall.jpg" 
            material="" 
            geometry="" 
            rotation="0 90 0"
            class="collision">
        </a-box>
        
         <a-box 
            position="1 2 3" 
            width="4" 
            height="4" 
            depth="0.1" 
            src="../textures/wall.jpg"
            class="collision"
            >
        </a-box>

        <a-box
            position="-3 2 3" 
            width="4" 
            height="4" 
            depth="0.1" 
            src="../textures/wall.jpg"
            class="collision"
            >
        </a-box>

        <a-box
            position="-3 1.4 2.9" 
            width="1.9" 
            height="2.7" 
            depth="0.1"
            id="to-coridor"
            src="../textures/door.jpg"
            class="clickable collision"
            >
        </a-box>

        <a-plane position="-1 4 -1" rotation="90 0 0" width="8" height="8" color="#5C4F3B" src="../textures/roof.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="0 0 0" rotation="-90 0 0" width="2" height="2" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="2 0 0" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="-2 0 0" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="0 0 2" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="2 0 2" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="-2 0 2" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="-4 0 2" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="0 0 -2" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="2 0 -2" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="-2 0 -2" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="-4 0 -2" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="0 0 -4" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="2 0 -4" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="-2 0 -4" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="-4 0 -4" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="0 0 0" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="2 0 0" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="-2 0 0" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>

        <a-plane position="-4 0 0" rotation="-90 0 0" width="2" height="2" color="#5C4F3B" src="../textures/floor.jpg"
        material="metalness:0; roughness:1"></a-plane>
   

        <!-- –û–∫–Ω–æ -->
        <a-box
            position="-4.82 2 0" 
            width="0.1" 
            height="2" 
            depth="3" 
            color="#87CEEB"
            src="../textures/window.jpg"
            class="collision">
            
        </a-box>
    
        <!-- –ö–∞–º–µ—Ä–∞ -->
        <a-entity id="cameraRig" position="0 1.6 0">
            <a-entity id="camera" camera look-controls wasd-controls="acceleration:20" reset-on-collision="with: .collision">
            <a-entity id="headLight"
                        light="type: point; color: #ffffff; intensity: 1; distance: 4; decay: 1">
            </a-entity>
            </a-entity>
        </a-entity>


        <a-entity
            cursor="fuse: false; rayOrigin: mouse"
            raycaster="objects: .clickable">
        </a-entity>


        <!-- –°—Ç—É–ª -->
        <a-entity
            gltf-model="../models/default_chair.glb"
            position="0 0.5 1"
            scale="0.8 0.8 0.8"
            rotation="0 180 0"
            class="collision">
        </a-entity>

        <!-- –°—Ç—É–ª -->
        <a-entity
            gltf-model="../models/default_chair.glb"
            position="2 0.5 1.5"
            scale="0.8 0.8 0.8"
            rotation="0 90 0"
            class="collision">
        </a-entity>

        <!-- –°—Ç–æ–ª -->
        <a-entity
            gltf-model="../models/old_table.glb"
            position="0 0.17 2.1"
            scale="0.03 0.015 0.02"
            rotation="0 0 0"
            class="collision">
        </a-entity>

        <!-- –ö—Ä–æ–≤–∞—Ç—å -->
        <a-entity
            gltf-model="../models/hospital_bed.glb"
            position="1.4 0 -4"
            scale="0.015 0.015 0.015"
            rotation="0 180 0"
            class="collision">
        </a-entity>

        <!-- –®–∫–∞—Ñ -->
        <a-entity
            gltf-model="../models/closet.glb"
            position="-3 2 -4.35"
            scale="2 2 2"
            rotation="0 -90 0"
            class="collision">
        </a-entity>

        <!-- –ö–∞—Ä—Ç–∏–Ω–∞ -->
        <a-entity
            gltf-model="../models/wall_picture.glb"
            position="2.9 2 -0.4"
            scale="1 1 1"
            rotation="0 -90 0"
            class="collision">
        </a-entity>

        <!-- –ö–∞—Ä—Ç–∏–Ω–∞ –º–∞–Ω—å—è–∫–∏—á–∞ -->
        <a-entity
            gltf-model="../models/wall_picture.glb"
            position="0 2 2.93"
            scale="1 1 1"
            rotation="0 180 0"
            class="collision">
        </a-entity>

        <!-- –ö–∞—Ä—Ç–∏–Ω–∞ –º–∞–Ω—å—è–∫–∏—á–∞ —Ñ–æ—Ç–æ -->
        <a-box
            position="0 2 2.92" 
            width="0.01" 
            height="1.10" 
            depth="1.75" 
            color="#87CEEB"
            src="../textures/doctor.png"
            class="collision"
            rotation="0 90 0">
            
        </a-box>

        <!-- –ö—Ä–æ–≤—å -->
        <a-entity
            gltf-model="../models/blood.glb"
            position="1.6 0 -2"
            scale="0.1 0.1 0.1"
            rotation="0 -90 0">
        </a-entity>


    </a-scene>

    <!-- –ö–æ–¥–∏–∫ –¥–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ -->
    <script src="../scripts/inventory.js"></script>
    <script src="../scripts/interactiveThings.js"></script>
    <script src="../scripts/unlockThings.js"></script>
    <script src="../scripts/notifications.js"></script>
    <script>
        let inventorySystem;
        let interactiveThings;
        let notification;
        let unlockThings;

        document.querySelector('a-scene').addEventListener('loaded', function() {
            notification = new Notifications();
            inventorySystem = new InventorySystem(notification);
            interactiveThings = new InteractiveThings(inventorySystem, notification);
            unlockThings = new UnlockThings(inventorySystem, interactiveThings, notification);
        }); 
    </script>
    <!-- /–ö–æ–¥–∏–∫ –¥–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->

    <!-- –ö–æ–¥–∏–∫ –¥–ª—è –ª–æ–∫–∞—Ü–∏–π -->
    <script src="../scripts/locationController.js"></script>
    <script>
        const locationController = new LocationController("start-room");

        document.querySelector('a-scene').addEventListener('loaded', function() {
            const camera = document.getElementById("camera");

            if (locationController.lastLocation === "coridor") {
                camera.setAttribute("position", "-3 0 2")
            }
            else {
                camera.setAttribute("position", "1 0 -2")
            }
            locationController.updateLastLocation();
        }); 
    </script>
    <!-- –ö–æ–¥–∏–∫ –¥–ª—è –ª–æ–∫–∞—Ü–∏–π -->

    <script src="../scripts/reset-on-collision.js"></script>
    <script>
        document.getElementById('to-coridor').addEventListener('click', (event) => {
            window.location.replace("./coridor.html");
        });
    </script>
</body>
</html>